<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Fly Rider â€” Ø§Ù„Ø¹Ø¨ ÙˆØ§ÙƒØ³Ø¨ ØªÙˆØµÙŠÙ„Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</title>
<style>
  :root{
    --bg1:#eaf6ff; --bg2:#ffffff;
    --ui:#0e2a3d; --muted:#50748a;
    --pill:#fff; --accent:#2ecc71;
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;font-family:system-ui,"Cairo",sans-serif;background:linear-gradient(var(--bg1),var(--bg2));color:var(--ui)}
  .wrap{max-width:980px;margin:0 auto;padding:14px}
  h1{display:flex;gap:10px;align-items:center;justify-content:space-between;margin:6px 0 10px;font-size:28px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .pill{background:var(--pill);border:1px solid #e5eef6;border-radius:16px;padding:10px 14px;font-weight:800;color:var(--ui)}
  .btn{cursor:pointer;border:none;border-radius:999px;padding:10px 16px;background:#20c997;color:#fff;font-weight:900;box-shadow:0 6px 16px rgba(32,201,151,.3)}
  #game{display:block;width:100%;max-width:980px;height:320px;border-radius:16px;border:1px solid #dfe8f0;background:transparent;box-shadow:0 0 10px rgba(0,0,0,.05)}
  .overlay{position:absolute;inset:0;display:grid;place-items:center;text-align:center;background:rgba(255,255,255,.55);backdrop-filter:blur(3px);border-radius:16px;font-weight:900}
  .overlay.hidden{display:none}
  .toast{position:fixed;bottom:12px;left:50%;transform:translateX(-50%);background:#fff;border:1px solid #e6eef5;border-radius:16px;padding:12px 16px;box-shadow:0 10px 24px rgba(0,0,0,.12);display:none;text-align:center}
  .toast.show{display:block}
</style>
</head>
<body>
  <div class="wrap">
    <div class="row">
      <button id="btnStart" class="btn">Ø§Ø¨Ø¯Ø£</button>
      <button id="btnSound" class="pill">ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ğŸ”Š</button>
    </div>

    <h1>Fly Rider ğŸï¸</h1>

    <div class="row" style="margin-bottom:10px">
      <div class="pill">Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø©: <span id="best">0</span></div>
      <div class="pill">Ø§Ù„Ù…Ø³Ø§ÙØ©: <span id="score">0</span> / 10000</div>
    </div>

    <div style="position:relative">
      <canvas id="game" width="980" height="320"></canvas>
      <div id="overlay" class="overlay">
        Ø§Ø¶ØºØ· <span style="color:#2ecc71">Ø§Ø¨Ø¯Ø£</span> Ø£Ùˆ Ø§Ù„Ù…Ø³ Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù„Ø§Ù†Ø·Ù„Ø§Ù‚<br/>
        Ø§Ù„Ù‡Ø¯Ù: 10000 Ù†Ù‚Ø·Ø© â€” Ø§Ù‚ÙØ² ÙˆØªÙØ§Ø¯Ù Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ âœ¨
      </div>
    </div>

    <p style="color:var(--muted);font-weight:700">Ù„Ùˆ Ø®Ø¨Ø·Øª ÙÙŠ Ø¹Ø§Ø¦Ù‚ â€” Ø§Ø¶ØºØ· Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© âœ¨</p>
  </div>
  <div id="toast" class="toast"></div>

<script>
const RIDER_SRC='https://i.ibb.co/0pCGtrP6/Picsart-25-10-16-11-05-31-905.png';
const GOAL=10000;
const canvas=document.getElementById('game'),c=canvas.getContext('2d');
const W=()=>canvas.clientWidth,H=()=>canvas.clientHeight;
const GROUND_Y=()=>H()*0.82;
let running=false,gameOver=false,won=false;
let score=0,best=parseInt(localStorage.getItem('flyrider_best')||'0');
document.getElementById('best').textContent=best;
let speed=6;

const riderImg=new Image();riderImg.crossOrigin='anonymous';
let imgReady=false;riderImg.onload=()=>{imgReady=true;drawStatic();};
riderImg.src=RIDER_SRC;

const rider={x:80,y:0,w:190,h:120,vy:0,onGround:true};
const obstacles=[];
function spawnObstacle(){
 const gap=140+Math.random()*120;
 const last=obstacles[obstacles.length-1];
 const x=last?last.x+gap+40+Math.random()*80:W()+60;
 const h=30+Math.random()*35,w=26+Math.random()*32;
 obstacles.push({x,y:GROUND_Y()-h,w,h});
}
for(let i=0;i<5;i++)spawnObstacle();

let AC,ctx,gain,soundOn=false;
function audioInit(){if(ctx)return;const A=window.AudioContext||window.webkitAudioContext;if(!A)return;ctx=new A();gain=ctx.createGain();gain.gain.value=0.18;gain.connect(ctx.destination);}
function beep(freq=880,dur=.08){if(!ctx||!soundOn)return;const o=ctx.createOscillator(),g=ctx.createGain();o.connect(g);g.connect(gain);o.frequency.value=freq;g.gain.setValueAtTime(0.0001,ctx.currentTime);g.gain.exponentialRampToValueAtTime(.6,ctx.currentTime+0.01);g.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+dur);o.start();o.stop(ctx.currentTime+dur+0.01);}
document.getElementById('btnSound').onclick=()=>{audioInit();soundOn=!soundOn;if(gain)gain.gain.value=soundOn?0.18:0;event.target.textContent=soundOn?'Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª ğŸ”‡':'ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ğŸ”Š';};

function startGame(){if(running)return;overlay.classList.add('hidden');running=true;gameOver=false;won=false;lastTime=performance.now();requestAnimationFrame(loop);}
function jump(){if(!running)startGame();if(!rider.onGround||gameOver)return;rider.vy=-13;rider.onGround=false;beep(920,.07);}
document.getElementById('btnStart').onclick=jump;
canvas.addEventListener('pointerdown',jump);
addEventListener('keydown',e=>{if([' ','ArrowUp','w','W'].includes(e.key)){e.preventDefault();jump();}if((e.key==='r'||e.key==='R')&&gameOver)resetGame();});
['click','touchstart','pointerdown'].forEach(ev=>addEventListener(ev,audioInit,{once:true}));

function drawBackground(){
 const y=GROUND_Y(),h=H()-y;
 const grd=c.createLinearGradient(0,y,0,H());
 grd.addColorStop(0,'#cfe3d1');grd.addColorStop(1,'#b3d3b9');
 c.fillStyle=grd;c.fillRect(0,y-4,W(),h+4);
 c.strokeStyle='#c6d0db';c.lineWidth=2;c.beginPath();c.moveTo(0,y);c.lineTo(W(),y);c.stroke();
}
function drawRider(){
 c.fillStyle='rgba(0,0,0,.12)';
 c.beginPath();c.ellipse(rider.x+rider.w*0.55,GROUND_Y()+6,48,10,0,0,Math.PI*2);c.fill();
 if(imgReady)c.drawImage(riderImg,rider.x,rider.y,rider.w,rider.h);
}
function drawObstacles(){
 c.fillStyle='#2c3e50';
 obstacles.forEach(o=>{o.x-=speed;c.fillRect(o.x,o.y,o.w,o.h);});
 while(obstacles.length&&obstacles[0].x+obstacles[0].w<-20){obstacles.shift();spawnObstacle();}
}
function physics(){
 rider.vy+=0.7;rider.y+=rider.vy;
 if(rider.y+rider.h>=GROUND_Y()){rider.y=GROUND_Y()-rider.h;rider.vy=0;rider.onGround=true;}
 const rx=rider.x+24,ry=rider.y+12,rw=rider.w-38,rh=rider.h-18;
 for(const o of obstacles){if(rx<o.x+o.w&&rx+rw>o.x&&ry<o.y+o.h&&ry+rh>o.y){endGame(false);break;}}
}
let lastTime=0;
function loop(ts){
 if(!running)return;const dt=(ts-lastTime)/16.67;lastTime=ts;
 c.clearRect(0,0,W(),H());
 drawBackground();drawObstacles();physics();drawRider();
 score+=Math.max(1,Math.floor(dt));
 if(score%120===0)speed=Math.min(12,speed+0.05);
 document.getElementById('score').textContent=score;
 if(score>=GOAL&&!won){endGame(true);return;}
 requestAnimationFrame(loop);
}
const overlay=document.getElementById('overlay');
const toast=document.getElementById('toast');
function showToast(msg){toast.textContent=msg;toast.classList.add('show');}
function endGame(isWin){
 running=false;gameOver=true;won=isWin;
 best=Math.max(best,score);localStorage.setItem('flyrider_best',best);
 document.getElementById('best').textContent=best;
 if(isWin){
  showToast('ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! ÙƒØ³Ø¨Øª ØªÙˆØµÙŠÙ„Ø© Ù…Ø¬Ø§Ù†ÙŠØ© â€” Ø®ÙØ¯ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© ÙˆØ§Ø¨Ø¹ØªÙ‡Ø§ Ø¹Ù„Ù‰ ÙˆØ§ØªØ³Ø§Ø¨ âœ…');
  beep(660,.12);setTimeout(()=>beep(990,.16),120);
 }else{showToast('ğŸ’¥ Ø£ÙˆÙˆÙˆØ¨Ø³! Ø­Ø§ÙˆÙ„ ØªØ§Ù†ÙŠ â€” Ø§Ø¶ØºØ· Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©');beep(180,.16);}
 setTimeout(()=>overlay.classList.remove('hidden'),200);
}
function resetGame(){
 score=0;speed=6;rider.y=GROUND_Y()-rider.h;rider.vy=0;rider.onGround=true;
 obstacles.length=0;for(let i=0;i<5;i++)spawnObstacle();
 overlay.classList.add('hidden');toast.classList.remove('show');
 running=true;gameOver=false;won=false;lastTime=performance.now();
 requestAnimationFrame(loop);
}
overlay.addEventListener('pointerdown',()=>gameOver?resetGame():startGame());
function drawStatic(){c.clearRect(0,0,W(),H());drawBackground();rider.y=GROUND_Y()-rider.h;drawRider();}
drawStatic();
</script>
</body>
</html>
